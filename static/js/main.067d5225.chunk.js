(this["webpackJsonpcreater-web"]=this["webpackJsonpcreater-web"]||[]).push([[0],{100:function(t,e,n){},119:function(t,e,n){},121:function(t,e,n){},222:function(t,e,n){},223:function(t,e,n){},224:function(t,e,n){},225:function(t,e,n){},226:function(t,e,n){"use strict";n.r(e);var a=n(0),s=n.n(a),r=n(42),u=n.n(r),o=n(7),i=n(9),c=n(10),p=n(12),d=n(11),l=(n(100),n(13)),m=n(20),h=n.n(m),j="https://uxcandy.com/~shapoval/test-task-backend/v2",f=function(){return h.a.get(j+"?developer=dmitry")},b=function(t,e){var n=new FormData;return n.append("username",t),n.append("password",e),h.a.post(j+"/login?developer=dmitry",n)},v=function(t,e){var n=new FormData;return n.append("username",t),n.append("password",e),h.a.post(j+"/login?developer=dmitry",n)},O=function(t){return h.a.get(j+"?developer=dmitry&page="+t)},x=function(t,e){return h.a.get(j+"?developer=dmitry&page="+e+"&sort_field="+t)},k=function(t,e,n){var a=new FormData;return a.append("username",t),a.append("email",e),a.append("text",n),h.a.post(j+"/create?developer=dmitry",a)},g=function(t,e,n,a){var s=new FormData;return s.append("token",e),s.append("text",n),s.append("status",a),h.a.post(j+"/edit/"+t+"?developer=dmitry",s)},T="LOGIN",M="LOGOUT",y="AUTH_ME",A={error:null,isAuthMe:!1,message:null,openForm:!1,loginForm:"",passwordForm:"",token:null},S=function(t){return{type:T,payload:t}},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:var n=Object(l.a)({},t);return n.openForm=!0,n;case T:var a=Object(l.a)({},t);return"ok"===e.payload.data.status?(a.openForm=!1,a.isAuthMe=!0,a.token=e.payload.data.message.token):a.error=e.payload.data.status,a;case M:var s=Object(l.a)({},t);return s.openForm=!1,s.isAuthMe=!1,s;default:return t}},N=(n(119),n(2)),C=function(t){return Object(N.jsxs)("div",{className:"header",children:[Object(N.jsx)("p",{className:t.isAuthMe?"admin":null,children:t.isAuthMe?"\u0410\u0434\u043c\u0438\u043d":"\u041d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d"}),t.isAuthMe?Object(N.jsx)("button",{className:"btn-login",onClick:function(){t.logoutThunk()},children:"\u0412\u044b\u0439\u0442\u0438"}):Object(N.jsx)("button",{className:"btn-login",onClick:function(){t.authMeAC()},children:"\u0412\u043e\u0439\u0442\u0438"})]})},U=function(t){Object(p.a)(n,t);var e=Object(d.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(N.jsx)(C,{isAuthMe:this.props.isAuthMe,openForm:this.props.openForm,authMeAC:this.props.authMeAC,logoutThunk:this.props.logoutThunk})}}]),n}(s.a.Component),F=Object(o.b)((function(t){return{isAuthMe:t.auth.isAuthMe,openForm:t.auth.openForm}}),{authMeAC:function(){return{type:y}},logoutThunk:function(){return function(t){v(null,null),t({type:M})}}})(U),w=n(228),_=n(227),I=(n(121),Object(_.a)({form:"login"})((function(t){return Object(N.jsxs)("form",{className:"login",onSubmit:t.handleSubmit,children:[Object(N.jsx)(w.a,{component:"input",name:"username",required:!0}),Object(N.jsx)(w.a,{type:"password",name:"password",component:"input",required:!0}),Object(N.jsx)("button",{children:"\u0412\u043e\u0439\u0442\u0438"})]})}))),P=function(t){Object(p.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).onSubmit=function(e){t.props.loginThunk(e)},t}return Object(c.a)(n,[{key:"render",value:function(){return Object(N.jsx)(I,{onSubmit:this.onSubmit})}}]),n}(s.a.Component),R=Object(o.b)((function(t){return{loginForm:t.auth.loginForm,passwordForm:t.auth.passwordForm}}),{login:S,loginThunk:function(t){return function(e){b(t.username,t.password).then((function(t){e(S(t))}))}}})(P),D="GET_USERS",q="SELECT_PAGE",L="SORT_ID",G="SORT_USERNAME",B="SORT_EMAIL",J="SORT_STATUS",X="ADD_USER",H="NEW_TEXT_USER",W="EDIT_INPUT",z={users:[],totalTaskCount:0,currentPage:1,error:null,statusEdit:null,setStatus:0,sort:{id:"active",username:"active",email:"active",status:"active"},adminMode:{id:null,text:null}},K=function(t,e){return{type:q,pageUsers:t,currentPageUsers:e}},Q=function(t,e){return{type:L,sortUserId:t,hasActiveId:e}},V=function(t,e){return{type:G,sortUserUsername:t,hasActiveUsername:e}},Y=function(t,e){return{type:B,sortUserEmail:t,hasActiveEmail:e}},Z=function(t,e){return{type:J,sortUserStatus:t,hasActiveStatus:e}},$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case D:var n=Object(l.a)({},t);return n.users=e.users,n.totalTaskCount=e.totalCount,n;case q:var a=Object(l.a)({},t);return a.users=e.pageUsers,a.currentPage=e.currentPageUsers,a.sort.id="active",a.sort.username="active",a.sort.email="active",a;case L:var s=Object(l.a)({},t);return s.users=e.sortUserId,s.sort.id=e.hasActiveId,s;case G:var r=Object(l.a)({},t);return r.users=e.sortUserUsername,r.sort.username=e.hasActiveUsername,r;case B:var u=Object(l.a)({},t);return u.users=e.sortUserEmail,u.sort.email=e.hasActiveEmail,u;case J:var o=Object(l.a)({},t);return o.users=e.sortUserStatus,o.sort.status=e.hasActiveStatus,o;case X:var i=Object(l.a)({},t);return"ok"===e.messageAdd.status?(i.error="ok",i.users.unshift(e.messageAdd.message)):i.error="error",i;case H:var c=Object(l.a)({},t);return c.adminMode.id=e.idElement,c.adminMode.text=e.textElement,c;case W:var p=Object(l.a)({},t);return p.adminMode.text===e.textEdit?p.setStatus=1:p.adminMode.text!==e.textEdit&&(p.setStatus=11),p.statusEdit=e.statusEdit,p;default:return t}},tt=(n(222),n(223),function(t){Object(p.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(t=e.call.apply(e,[this].concat(r))).text=s.a.createRef(),t.state={text:null},t.activateEditMode=function(e,n){t.props.activeInput(e,n),t.setState({text:n})},t.deactivateEditMode=function(e,n,a){t.props.activeInput(null,n),t.props.editThunk(e,t.props.token,n,t.props.setStatus,a),t.setState({text:t.props.adminMode.text})},t.newText=function(e,n){var a=t.text.current.value;t.props.activeInput(e,a),t.setState({text:n})},t}return Object(c.a)(n,[{key:"render",value:function(){var t=this,e=this.props.users.map((function(e,n){return Object(N.jsxs)("div",{className:"user",children:[Object(N.jsx)("p",{className:"user-id",children:e.id}),Object(N.jsx)("p",{className:"user-name",children:e.username}),Object(N.jsx)("p",{className:"user-email",children:e.email}),Object(N.jsx)("p",{className:"user-text",onClick:function(){return t.activateEditMode(n,e.text)},children:t.props.adminMode.id===n&&t.props.isAuthMe?Object(N.jsx)("input",{autoFocus:!0,onBlur:function(){return t.deactivateEditMode(e.id,t.props.adminMode.text,e.text)},value:t.props.adminMode.text,onChange:function(){return t.newText(n,t.props.adminMode.text)},ref:t.text}):t.props.adminMode.id===n?t.props.adminMode.text:e.text}),Object(N.jsxs)("p",{className:"user-status",children:[Object(N.jsx)("span",{className:t.props.adminMode.id===n&&t.props.isAuthMe&&0!==t.props.setStatus?"status-"+t.props.setStatus:"status-"+e.status}),Object(N.jsx)("span",{className:"status-text",children:0===e.status?"\u0437\u0430\u0434\u0430\u0447\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430":1===e.status?"\u0437\u0430\u0434\u0430\u0447\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430, \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0430\u0434\u043c\u0438\u043d\u043e\u043c":10===e.status?"\u0437\u0430\u0434\u0430\u0447\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430":"\u0437\u0430\u0434\u0430\u0447\u0430 \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0430\u0434\u043c\u0438\u043d\u043e\u043c \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430"})]})]},e.id)}));return Object(N.jsx)(N.Fragment,{children:e})}}]),n}(s.a.Component)),et=function(t){Object(p.a)(n,t);var e=Object(d.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(N.jsx)(tt,{users:this.props.users,isAuthMe:this.props.isAuthMe,adminMode:this.props.adminMode,token:this.props.token,setStatus:this.props.setStatus,activeInput:this.props.activeInput,editThunk:this.props.editThunk})}}]),n}(s.a.Component),nt=Object(o.b)((function(t){return{users:t.main.users,isAuthMe:t.auth.isAuthMe,adminMode:t.main.adminMode,token:t.auth.token,setStatus:t.main.setStatus}}),{activeInput:function(t,e){return{type:H,idElement:t,textElement:e}},editThunk:function(t,e,n,a,s){return function(r){g(t,e,n,a).then((function(t){r(function(t,e){return{type:W,statusEdit:t,textEdit:e}}(t.data.status,s))}))}}})(et),at=n.p+"static/media/loader.4f50df34.svg",st=(n(224),Object(_.a)({form:"add-user"})((function(t){return Object(N.jsxs)("form",{className:"add-user",onSubmit:t.handleSubmit,children:[Object(N.jsx)(w.a,{component:"input",type:"text",name:"username",placeholder:"username",required:!0}),Object(N.jsx)(w.a,{component:"input",type:"email",name:"email",placeholder:"email",required:!0}),Object(N.jsx)(w.a,{component:"textarea",type:"text",name:"text",placeholder:"text",required:!0}),Object(N.jsx)("button",{children:"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})}))),rt=function(t){Object(p.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).onSubmit=function(e){t.props.addUserThunk(e.username,e.email,e.text)},t}return Object(c.a)(n,[{key:"render",value:function(){return Object(N.jsx)(st,{onSubmit:this.onSubmit})}}]),n}(s.a.Component),ut=Object(o.b)((function(t){return{totalTaskCount:t.main.totalTaskCount}}),{addUserThunk:function(t,e,n){return function(a){k(t,e,n).then((function(t){var e;a((e=t.data,{type:X,messageAdd:e}))}))}}})(rt),ot=function(t){for(var e=s.a.createRef(),n=s.a.createRef(),a=s.a.createRef(),r=s.a.createRef(),u=Math.ceil(t.totalTaskCount/3),o=[],i=1;i<=u;i++)o.push(i);return Object(N.jsxs)("div",{className:"main",children:[Object(N.jsxs)("div",{className:"users-filter",children:[Object(N.jsx)("p",{className:t.sort.id?"id "+t.sort.id:"id",ref:e,onClick:function(){var n=e.current.className;t.sortThunk(n,t.currentPage)},children:"ID"}),Object(N.jsx)("p",{className:t.sort.username?"username "+t.sort.username:"username",ref:n,onClick:function(){var e=n.current.className;t.sortThunk(e,t.currentPage)},children:"USERNAME"}),Object(N.jsx)("p",{className:t.sort.email?"email "+t.sort.email:"email",onClick:function(){var e=a.current.className;t.sortThunk(e,t.currentPage)},ref:a,children:"EMAIL"}),Object(N.jsx)("p",{className:"text",children:"TEXT"}),Object(N.jsx)("p",{className:t.sort.status?"status "+t.sort.status:"status",onClick:function(){var e=r.current.className;t.sortThunk(e,t.currentPage)},ref:r,children:"STATUS"})]}),0===t.users.length?Object(N.jsx)("div",{className:"preloader",children:Object(N.jsx)("img",{src:at})}):Object(N.jsx)(nt,{}),Object(N.jsxs)("div",{className:"paginator",children:[Object(N.jsx)("span",{className:"prev-page",onClick:function(){t.pageThunk("prev",t.currentPage,o.length)}}),Object(N.jsx)("div",{className:"btn-page",children:o[t.currentPage-1]}),Object(N.jsx)("span",{className:"next-page",onClick:function(){t.pageThunk("next",t.currentPage,o.length)}})]}),Object(N.jsx)(ut,{})]})},it=function(t){Object(p.a)(n,t);var e=Object(d.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.usersThunk()}},{key:"render",value:function(){return Object(N.jsx)(ot,{users:this.props.users,sort:this.props.sort,totalTaskCount:this.props.totalTaskCount,currentPage:this.props.currentPage,pageThunk:this.props.pageThunk,sortThunk:this.props.sortThunk})}}]),n}(s.a.Component),ct=Object(o.b)((function(t){return{users:t.main.users,totalTaskCount:t.main.totalTaskCount,currentPage:t.main.currentPage,sort:t.main.sort}}),{usersThunk:function(){return function(t){f().then((function(e){var n,a;t((n=e.data.message.tasks,a=e.data.message.total_task_count,{type:D,users:n,totalCount:a}))}))}},pageThunk:function(t,e,n){return function(a){"next"===t&&(n<=e?O(1).then((function(t){a(K(t.data.message.tasks,1))})):O(e+1).then((function(t){a(K(t.data.message.tasks,e+1))}))),"prev"===t&&(1===e?O(n).then((function(t){a(K(t.data.message.tasks,n))})):O(e-1).then((function(t){a(K(t.data.message.tasks,e-1))})))}},sortThunk:function(t,e){if("id"===t){return function(t){x("id&sort_direction=asc",e).then((function(e){t(Q(e.data.message.tasks,"active"))}))}}if("id active"===t){return function(t){x("id&sort_direction=desc",e).then((function(e){t(Q(e.data.message.tasks,null))}))}}if("username"===t){return function(t){x("username&sort_direction=asc",e).then((function(e){t(V(e.data.message.tasks,"active"))}))}}if("username active"===t){return function(t){x("username&sort_direction=desc",e).then((function(e){t(V(e.data.message.tasks,null))}))}}if("email"===t){return function(t){x("email&sort_direction=asc",e).then((function(e){t(Y(e.data.message.tasks,"active"))}))}}if("email active"===t){return function(t){x("email&sort_direction=desc",e).then((function(e){t(Y(e.data.message.tasks,null))}))}}if("status"===t){return function(t){x("status&sort_direction=asc",e).then((function(e){t(Z(e.data.message.tasks,"active"))}))}}if("status active"===t){return function(t){x("status&sort_direction=desc",e).then((function(e){t(Z(e.data.message.tasks,null))}))}}}})(it),pt=function(t){return Object(N.jsxs)("div",{className:"app",children:[Object(N.jsx)(F,{}),Object(N.jsx)("div",{className:"container",children:t.openForm?Object(N.jsx)(R,{}):Object(N.jsx)(ct,{})})]})},dt=function(t){Object(p.a)(n,t);var e=Object(d.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(N.jsx)(pt,{openForm:this.props.openForm,isAuthMe:this.props.isAuthMe})}}]),n}(s.a.Component),lt=Object(o.b)((function(t){return{isAuthMe:t.auth.isAuthMe,openForm:t.auth.openForm}}),{})(dt),mt=(n(225),n(6)),ht=n(92),jt=n(229),ft=Object(mt.c)({auth:E,main:$,form:jt.a}),bt=Object(mt.d)(ft,Object(mt.a)(ht.a));u.a.render(Object(N.jsx)(s.a.StrictMode,{children:Object(N.jsx)(o.a,{store:bt,children:Object(N.jsx)(lt,{})})}),document.getElementById("root"))}},[[226,1,2]]]);
//# sourceMappingURL=main.067d5225.chunk.js.map